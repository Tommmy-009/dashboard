<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Accedi - Home Server Control Hub</title>
    <style>
      :root { color-scheme: dark; }
      * { box-sizing: border-box; }
      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        background: radial-gradient(1200px 800px at 20% 10%, rgba(78,70,221,0.25), transparent 60%),
                    radial-gradient(1000px 700px at 80% 90%, rgba(147,51,234,0.20), transparent 60%),
                    linear-gradient(135deg, #0b1020, #0c1226 60%, #0b0f1d);
        font-family: Inter, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
        color: #e5e7eb;
      }
      .glass {
        width: min(94vw, 380px);
        padding: 26px 22px;
        border-radius: 20px;
        background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
        border: 1px solid rgba(255,255,255,0.12);
        backdrop-filter: blur(18px) saturate(130%);
        box-shadow: 0 20px 60px rgba(0,0,0,0.45);
      }
      .title { display:flex; align-items:center; gap:10px; margin-bottom: 4px; }
      .title .logo {font-size: 26px}
      .title h1 { margin: 0; font-size: 18px; font-weight: 700;}
      .subtitle { margin: 0 0 18px 0; color: #a5b4fc; font-size: 13px; opacity:.9}
      label { display:block; font-size: 12px; color:#cbd5e1; margin: 12px 0 6px; }
      input {
        width: 100%; padding: 11px 12px; border-radius: 12px;
        border: 1px solid rgba(148,163,184,0.25);
        background: rgba(12,18,38,0.6); color: #e5e7eb; outline: none;
        transition: border .15s, box-shadow .15s, transform .08s;
      }
      input:focus { border-color:#8b5cf6; box-shadow: 0 0 0 3px rgba(139,92,246,0.25); transform: translateY(-1px); }
      button {
        width: 100%; margin-top: 16px; padding: 12px 14px; border: 0; border-radius: 14px;
        background: linear-gradient(180deg, #7c3aed, #4f46e5);
        color: white; font-weight: 700; letter-spacing: .2px; cursor: pointer;
        box-shadow: inset 0 1px 0 rgba(255,255,255,.2), 0 8px 20px rgba(79,70,229,.35);
        transition: transform .08s ease, filter .15s ease;
      }
      button:hover { filter: brightness(1.07) saturate(1.08); }
      button:active { transform: translateY(1px); }
      .err { color:#fecaca; font-size:12px; min-height:16px; margin-top:8px; }
      .hint { font-size:11px; color:#94a3b8; margin-top:10px }
      .footer { margin-top:16px; text-align:center; font-size:12px; color:#94a3b8; opacity:.9 }
    </style>
  </head>
  <body>
    <form class="glass" id="form" autocomplete="on">
      <div class="title">
        <div class="logo">üõ°Ô∏è</div>
        <h1>Accesso protetto</h1>
      </div>
      <p class="subtitle">Home Server Control Hub</p>

      <label>Username</label>
      <input id="user" required autocomplete="username" placeholder="tommy" />

      <label>Password</label>
      <input id="pass" required type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />

      <div class="err" id="err"></div>
      <button type="submit">Entra</button>
      <div class="hint">Configura <code>.env</code> (vedi <code>.env.example</code>)</div>
      <div class="footer">¬© Tommy</div>
    </form>

    <script>
      const f = document.getElementById('form');
      const u = document.getElementById('user');
      const p = document.getElementById('pass');
      const e = document.getElementById('err');
      f.addEventListener('submit', async (ev) => {
        ev.preventDefault();
        e.textContent = '';
        const res = await fetch('/api/login', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ username: u.value.trim(), password: p.value })
        });
        if (res.ok) { window.location.href = '/'; }
        else {
          const data = await res.json().catch(()=>({error:'Errore'}));
          e.textContent = data.error || 'Credenziali errate';
        }
      });
    </script>
  </body>
</html>
